---
### START Module/App Configuration ###
nginx_conf_dir:               /etc/nginx
nginx_log_dir:                /var/log/nginx
nginx_run_dir:                /var/nginx
nginx_temp_dir:               /tmp
nginx_pid_file:               /var/run/nginx.pid
nginx_conf_fragments_dir:     /tmp/nginx-config-assemble.d

nginx_client_body_temp_path:  "{{ nginx_run_dir }}/client_body_temp"
nginx_daemon_user:            nginx
nginx_global_owner:           'root'
nginx_global_group:           "{{ nginx_root_group }}"
nginx_global_mode:            '0644'
nginx_http_access_log:        "{{ nginx_log_dir }}/access.log"
nginx_manage_repo:            true
nginx_nginx_error_log:        "{{ nginx_log_dir }}/error.log"
nginx_root_group:             root
nginx_proxy_temp_path:        "{{ nginx_run_dir }}/proxy_temp"
nginx_sites_available_owner:  'root'
nginx_sites_available_group:  "{{ nginx_root_group }}"
nginx_sites_available_mode:   '0644'
nginx_super_user:             true
nginx_confd_purge:            false
nginx_vhost_purge:            false


### START Nginx Configuration ###
nginx_client_body_buffer_size:         '128k'
nginx_client_max_body_size:            '10m'
nginx_events_use:                      false
nginx_fastcgi_cache_inactive:          '20m'
nginx_fastcgi_cache_key:               false
nginx_fastcgi_cache_keys_zone:         'd3:100m'
nginx_fastcgi_cache_levels:            '1'
nginx_fastcgi_cache_max_size:          '500m'
nginx_fastcgi_cache_path:              false
nginx_fastcgi_cache_use_stale:         false
nginx_fastcgi_params_file:             "{{ nginx_conf_dir }}/fastcgi_params"
nginx_uwsgi_params_file:               "{{ nginx_conf_dir }}/uwsgi_params"
nginx_gzip:                            'on'
nginx_gzip_buffers: 
nginx_gzip_comp_level:                 1
nginx_gzip_disable:                    'msie6'
nginx_gzip_min_length:                 20
nginx_gzip_http_version:               1.1
nginx_gzip_proxied:                    'off'
nginx_gzip_types:                      'text/html'
nginx_gzip_vary:                       'off'
nginx_http_cfg_append:                 false
nginx_http_tcp_nodelay:                'on'
nginx_http_tcp_nopush:                 'off'
nginx_keepalive_timeout:               '65'
nginx_log_format:                      {}
nginx_mail:                            false
nginx_multi_accept:                    'off'
nginx_names_hash_bucket_size:          '64'
nginx_names_hash_max_size:             '512'
nginx_nginx_cfg_prepend:               {}
nginx_proxy_buffers:                   '32 4k'
nginx_proxy_buffer_size:               '8k'
nginx_proxy_cache_inactive:            '20m'
nginx_proxy_cache_keys_zone:           'd2:100m'
nginx_proxy_cache_levels:              '1'
nginx_proxy_cache_max_size:            '500m'
nginx_proxy_cache_path:                false
nginx_proxy_connect_timeout:           '90'
nginx_proxy_headers_hash_bucket_size:  '64'
nginx_proxy_http_version:              1.1
nginx_proxy_read_timeout:              '90'
nginx_proxy_redirect:                  'off'
nginx_proxy_send_timeout:              '90'
nginx_proxy_set_header:
  - 'Host $host'
  - 'X-Real-IP $remote_addr'
  - 'X-Forwarded-For $proxy_add_x_forwarded_for'
nginx_sendfile:                        'on'
nginx_server_tokens:                   'on'
nginx_spdy:                            'off'
nginx_ssl_stapling:                    'off'
nginx_types_hash_bucket_size:          '512'
nginx_types_hash_max_size:             '1024'
nginx_worker_connections:              '1024'
nginx_worker_processes:                '1'
nginx_worker_rlimit_nofile:            '1024'
### END Nginx Configuration ###


### START Package Configuration ###
nginx_package_name:                     nginx
nginx_package_source:                   nginx
nginx_package_flavor:
### END Package Configuration ###


### START Service Configuation ###
nginx_configtest_enable:                false
nginx_service_state:                    started
nginx_service_enable:                   true
nginx_service_flags:
nginx_service_restart:                  '/etc/init.d/nginx configtest && /etc/init.d/nginx restart'
nginx_service_name:                     nginx
### END Service Configuration ###


### START Geo ###
config_nginx_geo:          false
nginx_geo:
  - name:
    networks:        {}
    default:         ''
    ranges:          false
    address:         ''
    delete:          ''
    proxies:         []
    proxy_recursive: false

## Example: nginx_geo
## config_nginx_geo:     true
## nginx_geo:
##   - name:             client_network
##     ranges:           false
##     default:          extra
##     proxy_recursive:  false
##     proxies:          [ '192.168.99.99' ]
##     networks: 
##       '10.0.0.0/8':      'intra'
##       '172.16.0.0/12':   'intra'
##       '192.168.0.0/16':  'intra'
### END Geo ###


### START Map ###
config_nginx_map:     false
nginx_map:
  - name: client_network
    string:     $http_host
    mappings:   {}
    default:    ''
    hostnames:  false

## Example: nginx_map
## config_nginx_map:     true 
## nginx_map:
##   - name: client_network
##     hostnames: true
##     default: 'ny-pool-1'
##     string: $http_host
##     mappings:
##       '*.nyc.example.com': 'ny-pool-1'
##       '*.sf.example.com': 'sf-pool-1'
### END Map ###


### START Mailhost ###
config_nginx_mailhost:              false
nginx_mailhost_name:
nginx_mailhost_listen_port:         80
nginx_mailhost_listen_ip:           '*'     # accepts a string or a list of IPs
nginx_mailhost_listen_options:      ''
nginx_mailhost_ipv6_enable:         false
nginx_mailhost_ipv6_listen_ip:      '::'    # accepts a string or a list of IPs
nginx_mailhost_ipv6_listen_port:    80
nginx_mailhost_ipv6_listen_options: 'default ipv6only=on'
nginx_mailhost_ssl:                 false
nginx_mailhost_ssl_cert:            ''      # pre-generated SSL Certificate file
nginx_mailhost_ssl_key:             ''      # pre-generated SSL Key file
nginx_mailhost_ssl_port:            443
nginx_mailhost_starttls:            'off'   # enable STARTTLS support - (on|off|only)
nginx_mailhost_protocol:            ''      # mail protocol to use - (imap|pop3|smtp)
nginx_mailhost_auth_http:           ''      # HTTP-like server for authorization
nginx_mailhost_xclient:             'on'    # whether to use xclient for smtp (on|off)
nginx_mailhost_server_name:         [ "{{ nginx_mailhost_name }}" ]  # list of mailhostnames for which this mailhost will respond.
### END Mailhost ###

### START Upstream ###
config_nginx_upstream:  false
nginx_upstream: 
  - name: proxypass
    members: []
    upstream_cfg_prepend: {}
    upstream_fail_timeout: '10s'

## Example: nginx_upstream
## config_nginx_upstream:  true
## nginx_upstream: 
##   - name: proxypass
##     members: 
##       - 'localhost:3000'
##       - 'localhost:3001'
##       - 'localhost:3002'
##     upstream_cfg_prepend: 
##       ip_hash:    ''
##       keepalive:  20
##     upstream_fail_timeout: '10s'
### END Upstream ###

### START Location ###
#config_nginx_location:  false
#nginx_location_name:
#nginx_location_internal:              false
#nginx_location:              $name
#nginx_location_vhost:                 undef
#nginx_location_www_root:              undef
#nginx_location_autoindex:             undef
#nginx_location_index_files:           [ 'index.html', 'index.htm', 'index.php' ]
#nginx_location_proxy:                 undef
#nginx_location_proxy_redirect:        "{{ nginx_proxy_redirect }}"
#nginx_location_proxy_read_timeout:    "{{ nginx_proxy_read_timeout }}"
#nginx_location_proxy_connect_timeout: "{{ nginx_proxy_connect_timeout }}"
#nginx_location_proxy_set_header:      "{{ nginx_proxy_set_header }}"
#nginx_location_fastcgi:               undef
#nginx_location_fastcgi_param:         undef
#nginx_location_fastcgi_params:        "${::nginx::config::conf_dir}/fastcgi_params"
#nginx_location_fastcgi_script:        undef
#nginx_location_fastcgi_split_path:    undef
#nginx_location_uwsgi:                 undef
#nginx_location_uwsgi_params:          "${nginx::config::conf_dir}/uwsgi_params"
#nginx_location_ssl:                   false
#nginx_location_ssl_only:              false
#nginx_location_alias:        undef
#nginx_location_allow:        undef
#nginx_location_deny:         undef
#nginx_location_option:                undef
#nginx_location_stub_status:           undef
#nginx_location_raw_prepend:           undef
#nginx_location_raw_append:            undef
#nginx_location_custom_cfg:   undef
#nginx_location_cfg_prepend:  undef
#nginx_location_cfg_append:   undef
#nginx_location_custom_cfg_prepend:   undef
#nginx_location_custom_cfg_append:    undef
#nginx_location_include:               undef
#nginx_location_try_files:             undef
#nginx_location_proxy_cache:           false
#nginx_location_proxy_cache_key:       undef
#nginx_location_proxy_cache_use_stale:  undef
#nginx_location_proxy_cache_valid:     false
#nginx_location_proxy_method:          undef
#nginx_location_proxy_set_body:        undef
#nginx_location_auth_basic:            undef
#nginx_location_auth_basic_user_file:  undef
#nginx_location_rewrite_rules:         []
#nginx_location_priority:              500
#nginx_location_mp4:              false
#nginx_location_flv:              false
### END Location ###



### START Location ###
config_nginx_location:  false
nginx_location:
  - location:              /hello/world   
    vhost:                  myvhost.internal
    internal:              false
    www_root:              /var/www 
    autoindex:           
    index_files:           [ 'index.html', 'index.htm', 'index.php' ]
    proxy_pass:            'http://localhost:8080'  
    proxy_redirect:        "{{ nginx_proxy_redirect }}"
    proxy_read_timeout:    "{{ nginx_proxy_read_timeout }}"
    proxy_connect_timeout: "{{ nginx_proxy_connect_timeout }}"
    proxy_set_header:      "{{ nginx_proxy_set_header }}"
    fastcgi_script:
    fastcgi_split_path:
    fastcgi_pass:          'localhost:9000'
    fastcgi_param:
      REQUEST_METHOD:   '$request_method'
      CONTENT_TYPE:     '$content_type'
      CONTENT_LENGTH:   '$content_length'
    fastcgi_params_file:   "{{ nginx_conf_dir }}/fastcgi_params"
    fastcgi_script:
    fastcgi_split_path:
    uwsgi_pass:            'localhost:9000'
    uwsgi_params_file:     "{{ nginx_conf_dir }}/uwsgi_params"
    ssl:
    ssl_only:
    location_alias:        html/test/dir
    location_allow:
    location_deny:
    option:
    stub_status:          true  # should default to false or not defined at all
    raw_prepend:
    raw_append:
    custom_cfg:
    location_cfg_prepend:
    location_cfg_append:
    location_custom_cfg_prepend:
    location_custom_cfg_append: 
    include:        
    try_files:     
    proxy_cache:           false
    proxy_cache_key:
    proxy_cache_use_stale:
    proxy_cache_valid:     false
    proxy_method:        
    proxy_set_body:     
    auth_basic:        
    auth_basic_user_file:
    rewrite_rules:         []
    priority:              500
    mp4:                   false
    flv:                   false
### END Location ###


### START vHost ###
nginx_ssl_ciphers:                   'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA'
nginx_ssl_cache:                     'shared:SSL:10m'
nginx_ssl_session_timeout:           '5m'
nginx_ssl_protocols:                 'TLSv1 TLSv1.1 TLSv1.2'
nginx_index_files:                   [ 'index.html', 'index.htm', 'index.php'] # use an empty list to disable
nginx_vhost:
  - vhost:                         myvhost.internal
    enable:                        true
    listen_ip:                     '*'
    listen_port:                   '80'
    listen_options:                
    location_allow:                []
    location_deny:                 []
    ipv6_enable:                   false
    ipv6_listen_ip:                '::'
    ipv6_listen_port:              '80'
    ipv6_listen_options:           'default ipv6only=on'
    add_header:                    {}
    ssl:                           false
    ssl_port:                      443
    ssl_listen_option:             true
    ssl_protocols:                 'TLSv1 TLSv1.1 TLSv1.2'
    ssl_key:                       
    ssl_cert:                      
    ssl_client_cert:               
    ssl_dhparam:                   
    ssl_buffer_size:               
    ssl_ciphers:                   'ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:DHE-DSS-AES128-GCM-SHA256:kEDH+AESGCM:ECDHE-RSA-AES128-SHA256:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA:ECDHE-ECDSA-AES128-SHA:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA:ECDHE-ECDSA-AES256-SHA:DHE-RSA-AES128-SHA256:DHE-RSA-AES128-SHA:DHE-DSS-AES128-SHA256:DHE-RSA-AES256-SHA256:DHE-DSS-AES256-SHA:DHE-RSA-AES256-SHA:AES128-GCM-SHA256:AES256-GCM-SHA384:AES128-SHA256:AES256-SHA256:AES128-SHA:AES256-SHA:AES:CAMELLIA:DES-CBC3-SHA:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!aECDH:!EDH-DSS-DES-CBC3-SHA:!EDH-RSA-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA'
    ssl_cache:                     'shared:SSL:10m'
    ssl_crl:                       
    ssl_stapling:                  false
    ssl_stapling_file:             
    ssl_stapling_responder:        
    ssl_stapling_verify:           false
    ssl_session_timeout:           '5m'
    ssl_trusted_cert:              
    spdy:                          "{{ nginx_spdy }}"
    proxy_pass:                    
    proxy_redirect:                
    proxy_read_timeout:            "{{ nginx_proxy_read_timeout }}"
    proxy_connect_timeout:         "{{ nginx_proxy_connect_timeout }}"
    proxy_set_header:              []
    proxy_cache:                   false
    proxy_cache_key:               
    proxy_cache_use_stale:         
    proxy_cache_valid:             false
    proxy_method:                  
    proxy_set_body:                
    resolver:                      []
    fastcgi_pass:                  
    fastcgi_params_file:           "{{ nginx_conf_dir }}/fastcgi_params"
    fastcgi_script:                
    uwsgi_pass:                    
    uwsgi_params_file:             "{{ nginx_conf_dir }}/uwsgi_params"
    index_files:                   [ 'index.html', 'index.htm', 'index.php'] # use an empty list to disable
    autoindex:                     
    server_name:                   [myvhost.internal]
    www_root:                      
    rewrite_www_to_non_www:        false
    rewrite_to_https:              
    location_custom_cfg:           
    location_cfg_prepend:          
    location_cfg_append:           
    location_custom_cfg_prepend:   
    location_custom_cfg_append:    
    try_files:                     
    auth_basic:                    
    auth_basic_user_file:          
    client_body_timeout:           
    client_header_timeout:         
    client_max_body_size:          
    raw_prepend:                   
    raw_append:                    
    location_raw_prepend:          
    location_raw_append:           
    vhost_cfg_prepend:             
    vhost_cfg_append:              
    vhost_cfg_ssl_prepend:         {}
    vhost_cfg_ssl_append:          {}
    include_files:                 
    access_log:                    
    error_log:                     
    format_log:                    'combined'
    passenger_cgi_param:           
    passenger_set_header:          
    passenger_env_var:             
    log_by_lua:                    
    log_by_lua_file:               
    use_default_location:          true
    rewrite_rules:                 []
    string_mappings:               {}
    geo_mappings:                  {}
    gzip_types:                    
    owner:                         "{{ nginx_global_owner }}"
    group:                         "{{ nginx_global_group }}"
    mode:                          "{{ nginx_global_mode }}"
    maintenance:                   false
    maintenance_value:             'return 503'
### END vHost ###
